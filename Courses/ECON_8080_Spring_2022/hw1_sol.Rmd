---
output:  pdf_document
fontsize: 11pt
header-includes:
 - \usepackage{amsmath,amssymb,setspace}
 - \newcommand{\E}{\textrm{E}}
 - \newcommand{\var}{\textrm{var}}
 - \newcommand{\cov}{\textrm{cov}}
---

# Homework 1 Solutions

**Hansen 2.2**

\begin{align*}
  \E[YX] &= \E[X \E[Y|X]] \\
  &= \E[X (a+bX)] \\
  &= \E[aX + bX^2] \\
  &= a\E[X] + b\E[X^2]
\end{align*}
where the first equality holds by the law of iterated expectations, the second equality holds by the expression for $\E[Y|X]$ in the problem, and the remaining two equalities are just algebra/basic properties of expectations.


**Hansen 2.3**

\begin{align*}
  \E[h(X)e] &= \E[h(X)\E[e|X]] \\
  &= \E[h(X) 0] \\
  &= 0
\end{align*}
where the first equality holds by the law of iterated expectations, and the second equality holds because $\E[e|X]=0$.

By the way, the extra condition in the problem just guarantees that the moments in the problem exist (i.e., aren't positive or negative infinity)

**Hansen 2.19**

Let's start by expanding the expression for $d(b)$.  That is, notice that,
\begin{align*}
  d(b) = \E[(m(X)^2 - 2 m(X) X'b + \beta'X X'\beta)]
\end{align*}
Now, taking the derivative of $d(b)$ with respect to $b$ and setting it equal to 0 implies that
\begin{align*}
  0 &= -2\E[m(X) X] + 2\E[XX']\beta
\end{align*}
which is a $k \times 1$ vector.  Solving the previous equation for $\beta$, we get that
\begin{align*}
  \beta &= \E[XX']^{-1}\E[X m(X)] \\
  &= \E[XX']^{-1}\E[X \E[Y|X]] \\
  &= \E[XX']^{-1}\E[XY]
\end{align*}
where the first equality holds by rearranging terms from the previous equation, the second equality holds by the definition of $m(X)$, and the last equality holds by the law of iterated expectations (in the opposite direction than how we used it in previous problems).

**Extra Question 1**

```{r}
load("fertilizer_2000.RData")


# part (a)
nrow(fertilizer_2000)

# part (b)
fertilizer_2000[21,]$country

# part (c)
mean_gdp <- mean(fertilizer_2000$avgdppc)
mean_gdp

# part (d)
above_avg_gdp <- subset(fertilizer_2000, avgdppc > mean_gdp)
mean(above_avg_gdp$prec)
```

**Extra Question 2**

```{r}
# part (a)
fibonacci <- function(n) {
  # handle n=1 or 2
  if (n==1) return(0)
  if (n==2) return(1)
  
  fib <- c(0,1) # set first two values
  for (i in 3:n) {
    fib[i] <- fib[i-1] + fib[i-2]
  }
  fib[n]
}

# check that it works
fibonacci(5)
fibonacci(8)

# part (b)
alt_seq <- function(a,b,n) {
  if (n==1) return(a)
  if (n==2) return(b)
  
  alt_fib <- c(a,b)
  for (i in 3:n) {
    alt_fib[i] <- alt_fib[i-1] + alt_fib[i-2]
  }
  alt_fib[n]
}

# check that it works
alt_seq(a=3,b=7,n=4)
```

